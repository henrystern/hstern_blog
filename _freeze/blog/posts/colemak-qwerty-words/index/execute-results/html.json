{
  "hash": "9e5133ab2d1eedf03ff578951c1a654e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Valid inputs in multiple keyboard layouts\"\ndate: 2024-03-05\ncategories: [\"typing\", \"python\"]\nformat:\n  html:\n    df-print: kable\n---\n\n\nMost of the time, inputting keys in the wrong keyboard layout will result in gibberish --- but not always. I thought today I would try to find the longest input sequences that generate valid words in two different keyboard layouts.\n\nThe script is pretty simple and just brute forces comparisons along a large wordlist.\n\n\n::: {.cell}\n\n```{.python .cell-code  code-fold=\"true\"}\nfrom numpy import loadtxt\nfrom unidecode import unidecode\n\n\ndef main():\n    raw_words = loadtxt(\n        \"./blog/posts/colemak-qwerty-words/wordlist.txt\",\n        dtype=\"str\",\n    )\n    words = [unidecode(word).lower() for word in raw_words]\n\n    layouts = get_layouts()\n\n    matches = find_matches(words, layouts)\n\n    print(matches)\n\n    return matches\n\n\ndef get_layouts():\n    layouts = {}\n\n    layouts[\"qwerty\"] = [\n        [\"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\", \"i\", \"o\", \"p\", \"[\", \"]\", \"\\\\\"],\n        [\"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\", \"k\", \"l\", \";\", \"'\", \"\\n\"],\n        [\"z\", \"x\", \"c\", \"v\", \"b\", \"n\", \"m\", \",\", \".\", \"/\"],\n        [\" \"],\n    ]\n\n    layouts[\"colemak_dh\"] = [\n        [\"q\", \"w\", \"f\", \"p\", \"b\", \"j\", \"l\", \"u\", \"y\", \";\", \"[\", \"]\", \"\\\\\"],\n        [\"a\", \"r\", \"s\", \"t\", \"g\", \"m\", \"n\", \"e\", \"i\", \"o\", \"'\", \"\\n\"],\n        [\"x\", \"c\", \"d\", \"v\", \"z\", \"k\", \"h\", \",\", \".\", \"/\"],\n        [\" \"],\n    ]\n\n    layouts[\"colemak\"] = [\n        [\"q\", \"w\", \"f\", \"p\", \"g\", \"j\", \"l\", \"u\", \"y\", \";\", \"[\", \"]\", \"\\\\\"],\n        [\"a\", \"r\", \"s\", \"t\", \"d\", \"h\", \"n\", \"e\", \"i\", \"o\", \"'\", \"\\n\"],\n        [\"z\", \"x\", \"c\", \"v\", \"b\", \"k\", \"m\", \",\", \".\", \"/\"],\n        [\" \"],\n    ]\n\n    layouts[\"dvorak\"] = [\n        [\"'\", \",\", \".\", \"p\", \"y\", \"f\", \"g\", \"c\", \"r\", \"l\", \"/\", \"=\", \"\\\\\"],\n        [\"a\", \"o\", \"e\", \"u\", \"i\", \"d\", \"h\", \"t\", \"n\", \"s\", \"-\", \"\\n\"],\n        [\";\", \"q\", \"j\", \"k\", \"x\", \"b\", \"m\", \"w\", \"v\", \"z\"],\n        [\" \"],\n    ]\n\n    return layouts\n\n\ndef map_keys(keys):\n    map = {}\n    for i, row in enumerate(keys):\n        for j, key in enumerate(row):\n            map[key] = [i, j]\n    return map\n\n\ndef decipher(s, input_key, output_key):\n    input_map = map_keys(input_key)\n    out = []\n    for char in s:\n        i, j = input_map[char]\n        out.append(output_key[i][j])\n    return \"\".join(out).upper()\n\n\ndef type_sequence(sequence, layout):\n    keys = [layout[row][column] for (row, column) in sequence]\n    return \"\".join(keys)\n\n\ndef find_matches(words, layouts):\n    maps = {name: map_keys(layout) for (name, layout) in layouts.items()}\n\n    matches = {\"colemak_dh\": [], \"colemak\": [], \"dvorak\": []}\n\n    for word in words:\n        sequence = [maps[\"qwerty\"][char] for char in word]\n\n        output = {\n            \"colemak_dh\": type_sequence(sequence, layouts[\"colemak_dh\"]),\n            \"colemak\": type_sequence(sequence, layouts[\"colemak\"]),\n            \"dvorak\": type_sequence(sequence, layouts[\"dvorak\"]),\n        }\n\n        for layout, output in output.items():\n            if output in words:\n                matches[layout].append([word, output])\n                print(f\"{word} types {output} in {layout}\")\n\n    return matches\n\n\nif __name__ == \"__main__\":\n    matches = main()\n```\n:::\n\n\nThe prize for most similar goes to `mamma` which is the same in qwerty, colemak, and dvorak (can you guess why?).\n\nHere is the full list of pairs.\n\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|qwerty   |output   |layout     |\n|:--------|:--------|:----------|\n|misfaith |murtaugh |colemak    |\n|maddled  |massifs  |colemak    |\n|macamba  |macamba  |colemak    |\n|skulked  |reliefs  |colemak    |\n|skulked  |reliefs  |colemak_dh |\n|bahama   |bahama   |colemak    |\n|wahwah   |wahwah   |colemak    |\n|clarks   |diaper   |colemak_dh |\n|wagwag   |wagwag   |colemak_dh |\n|flossy   |unroof   |dvorak     |\n|based    |barfs    |colemak    |\n|banks    |baker    |colemak    |\n|bleed    |biffs    |colemak    |\n|basks    |barer    |colemak    |\n|chard    |chaps    |colemak    |\n|chasm    |charm    |colemak    |\n|drank    |spake    |colemak    |\n|disks    |surer    |colemak    |\n|dirks    |super    |colemak    |\n|forks    |typer    |colemak    |\n|ghana    |dhaka    |colemak    |\n|mamma    |mamma    |colemak    |\n|mamba    |mamba    |colemak    |\n|risks    |purer    |colemak    |\n|racks    |pacer    |colemak    |\n|slunk    |rilke    |colemak    |\n|sagas    |radar    |colemak    |\n|sacks    |racer    |colemak    |\n|simba    |rumba    |colemak    |\n|who'd    |why's    |colemak    |\n|wanks    |waker    |colemak    |\n|casks    |darer    |colemak_dh |\n|drank    |spake    |colemak_dh |\n|disks    |surer    |colemak_dh |\n|dirks    |super    |colemak_dh |\n|forks    |typer    |colemak_dh |\n|gordo    |gypsy    |colemak_dh |\n|hanks    |maker    |colemak_dh |\n|jacks    |nader    |colemak_dh |\n|rinks    |puker    |colemak_dh |\n|risks    |purer    |colemak_dh |\n|slunk    |rilke    |colemak_dh |\n|sicks    |ruder    |colemak_dh |\n|tasks    |barer    |colemak_dh |\n|tanks    |baker    |colemak_dh |\n|talak    |baiae    |colemak_dh |\n|flush    |ungod    |dvorak     |\n|float    |unray    |dvorak     |\n|flusk    |ungot    |dvorak     |\n|hoard    |drape    |dvorak     |\n|kodak    |treat    |dvorak     |\n|mamma    |mamma    |dvorak     |\n|rossy    |proof    |dvorak     |\n|rasps    |paolo    |dvorak     |\n|udons    |gerbo    |dvorak     |\n|yangs    |fabio    |dvorak     |\n|also     |airy     |colemak    |\n|bask     |bare     |colemak    |\n|base     |barf     |colemak    |\n|bank     |bake     |colemak    |\n|card     |caps     |colemak    |\n|cask     |care     |colemak    |\n|char     |chap     |colemak    |\n|chit     |chug     |colemak    |\n|disk     |sure     |colemak    |\n|data     |saga     |colemak    |\n|dank     |sake     |colemak    |\n|fork     |type     |colemak    |\n|flee     |tiff     |colemak    |\n|fief     |tuft     |colemak    |\n|gaga     |dada     |colemak    |\n|glad     |dias     |colemak    |\n|lamb     |iamb     |colemak    |\n|miff     |mutt     |colemak    |\n|maul     |mali     |colemak    |\n|mask     |mare     |colemak    |\n|rink     |puke     |colemak    |\n|risk     |pure     |colemak    |\n|rara     |papa     |colemak    |\n|rack     |pace     |colemak    |\n|sank     |rake     |colemak    |\n|sack     |race     |colemak    |\n|yank     |jake     |colemak    |\n|also     |airy     |colemak_dh |\n|cask     |dare     |colemak_dh |\n|clad     |dias     |colemak_dh |\n|conk     |dyke     |colemak_dh |\n|disk     |sure     |colemak_dh |\n|dank     |sake     |colemak_dh |\n|fork     |type     |colemak_dh |\n|flee     |tiff     |colemak_dh |\n|fief     |tuft     |colemak_dh |\n|faux     |talc     |colemak_dh |\n|gaga     |gaga     |colemak_dh |\n|hack     |made     |colemak_dh |\n|hank     |make     |colemak_dh |\n|hard     |maps     |colemak_dh |\n|haul     |mali     |colemak_dh |\n|mock     |hyde     |colemak_dh |\n|mask     |hare     |colemak_dh |\n|mash     |harm     |colemak_dh |\n|riff     |putt     |colemak_dh |\n|rink     |puke     |colemak_dh |\n|risk     |pure     |colemak_dh |\n|rara     |papa     |colemak_dh |\n|sick     |rude     |colemak_dh |\n|sank     |rake     |colemak_dh |\n|tiff     |butt     |colemak_dh |\n|task     |bare     |colemak_dh |\n|tank     |bake     |colemak_dh |\n|tack     |bade     |colemak_dh |\n|wash     |warm     |colemak_dh |\n|wale     |waif     |colemak_dh |\n|wack     |wade     |colemak_dh |\n|xmas     |char     |colemak_dh |\n|anno     |abbr     |dvorak     |\n|goal     |iran     |dvorak     |\n|lard     |nape     |dvorak     |\n|mama     |mama     |dvorak     |\n|malt     |many     |dvorak     |\n|maid     |mace     |dvorak     |\n|noah     |brad     |dvorak     |\n|paid     |lace     |dvorak     |\n|roam     |pram     |dvorak     |\n|rosy     |prof     |dvorak     |\n|rara     |papa     |dvorak     |\n|raid     |pace     |dvorak     |\n|soap     |oral     |dvorak     |\n|slid     |once     |dvorak     |\n|ussr     |goop     |dvorak     |\n\n</div>\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}