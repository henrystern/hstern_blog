<script>
  // highlight active nav-link
  let nav_links = document.querySelectorAll('.nav-link')
  let window_path = window.location.pathname
  nav_links.forEach((link) => {
    if (window_path.includes(link.pathname)) {
      link.classList.add('active')
      link.classList.add('opacity-100')
      if (link.children.length > 0) {
        link.children[0].classList.add('active')
      }
    }
  })
</script>

<script>
  // add animation for theme change
  let content = document.querySelector('#quarto-content')
  content.classList.add('color-fade')
  let nav_fixed = document.querySelector('.nav-fixed')
  nav_fixed.classList.add('bg-color-fade')
  let quarto_sidebar = document.querySelector('#quarto-sidebar')
  if (quarto_sidebar) quarto_sidebar.classList.add('transition')
</script>

<script>
  // smooth scrolling for anchor links
  // https://stackoverflow.com/questions/7717527/smooth-scrolling-when-clicking-an-anchor-link
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        let href = this.getAttribute('href');
        let href_id = href.slice(href.lastIndexOf("/") + 1);
        let element = document.querySelector(href_id)
        element.style.cssText += 'scroll-margin: 4rem;'
        element.scrollIntoView({
          block: 'start',
          behavior: 'smooth',
        });
    });
  });
</script>
